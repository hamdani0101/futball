{% extends "base.html" %}

{% block title %}
  {% if selected_season %}
    League Table - {{ selected_season.competition.name }} {{ selected_season.name }}
  {% else %}
    League Table
  {% endif %}
{% endblock %}

{% block extra_css %}{% endblock %}

{% block c_title %}Klasemen{% endblock %}

{% block content %}
<div class="competition-search">
  <form method="get" class="search-form">
    <div class="input-field field">
      <select name="competition" id="competition">
        {% for c in competitions %}
          <option value="{{ c.id }}"
          {% if selected_competition and c.id == selected_competition.id %}selected{% endif %}>
            {{ c.name }}
          </option>
        {% endfor %}
      </select>
      <label>Competition:</label>
    </div>
    <div class="input-field field">
      <select name="season" id="season">
        {% for s in seasons %}
          <option value="{{ s.id }}"
          {% if selected_season and s.id == selected_season.id %}selected{% endif %}>
            {{ s.name }}
          </option>
        {% endfor %}
      </select>
      <label>Season:</label>
    </div>
    <button class="btn waves-effect waves-light" type="submit" >Search
      <i class="material-icons right">search</i>
    </button> 
  </form>
</div>

<div class="row">
  <div class="col s12">
    <h5>
      {% if selected_season %}
        {{ selected_season.competition.name }} {{ selected_season.name }}
      {% else %}
        League Table
      {% endif %}
    </h5>
    <div class="table-shell">
      <table class="data-table league-table">
        <thead>
          <tr>
            <th>#</th>
            <th>Team</th>
            <th>P</th>
            <th>W</th>
            <th>D</th>
            <th>L</th>
            <th>GF</th>
            <th>GA</th>
            <th>GD</th>
            <th>Pts</th>
          </tr>
        </thead>
        <tbody>
          {% for row in table %}
          <tr class="
            {% if row.rank <= champions_league_cutoff %}
              ucl
            {% elif row.rank <= europa_league_cutoff %}
              europa
            {% elif row.rank <= conference_league_cutoff %}
              conference-league
            {% elif row.rank > relegation_cutoff %}
              relegation
            {% endif %}
          ">
            <td>{{ row.rank }}</td>
            <td class="team">{{ row.team }}</td>
            <td>{{ row.played }}</td>
            <td>{{ row.win }}</td>
            <td>{{ row.draw }}</td>
            <td>{{ row.loss }}</td>
            <td>{{ row.gf }}</td>
            <td>{{ row.ga }}</td>
            <td>{{ row.gd }}</td>
            <td><strong>{{ row.points }}</strong></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    
    <div class="legend">
      <span><span class="dot blue"></span> UEFA Champions League</span>
      <span><span class="dot orange"></span> Europa League</span>
      <span><span class="dot green"></span> Europa Conference League</span>
      <span><span class="dot red"></span> Relegation</span>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
{% endblock %}
