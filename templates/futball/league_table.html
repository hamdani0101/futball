{% extends "base.html" %}

{% block title %}League Table - {{ selected_season.competition.name }} {{ selected_season.name }}{% endblock %}

{% block extra_css %}
<style>
  table {
    width: 100%;
    max-width: 1100px;
    margin: auto;
    border-collapse: collapse;
    background: #ffffff;
    box-shadow: 0 6px 20px rgba(0,0,0,0.08);
    border-radius: 10px;
    overflow: hidden;
  }

  thead {
    background: #1e293b;
    color: #ffffff;
  }

  th, td {
    padding: 10px 12px;
    text-align: center;
    font-size: 14px;
  }

  th {
    text-transform: uppercase;
    font-size: 12px;
    letter-spacing: 0.05em;
  }

  tbody tr:nth-child(even) {
    background: #f8fafc;
  }

  tbody tr:hover {
    background: #e2e8f0;
  }

  td.team {
    text-align: left;
    font-weight: 600;
  }

  /* Qualification zones */
  tr.ucl { border-left: 5px solid #3b82f6; }
  tr.europa { border-left: 5px solid #f77a06ff; }
  tr.conference-league { border-left: 5px solid #09ff00ff; }
  tr.relegation { border-left: 5px solid #ef4444; }

  .legend {
    max-width: 1100px;
    margin: 14px auto;
    display: flex;
    justify-content: space-between;
    font-size: 13px;
  }

  .legend span {
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    display: inline-block;
  }

  .green { background: #22c55e; }
  .blue { background: #3b82f6; }
  .red { background: #ef4444; }
  .orange { background: #f77a06ff; }
</style>
{% endblock %}

{% block content %}
<h1>Klasemen</h1>

<form method="get" style="margin-bottom:24px;">
  <label for="competition"><strong>Competition:</strong></label>
  <select name="competition" id="competition">
    {% for c in competitions %}
      <option value="{{ c.id }}"
        {% if c.id == selected_season.competition.id %}selected{% endif %}>
        {{ c.name }}
      </option>
    {% endfor %}
  </select>
  <label for="season"><strong>Season:</strong></label>
  <select name="season" id="season">
    {% for s in seasons %}
      {% if s.competition.id == selected_season.competition.id %}
      <option value="{{ s.id }}"
        {% if s.id == selected_season.id %}selected{% endif %}>
        {{ s.name }}
      </option>
      {% endif %}
    {% endfor %}
  </select>
  <button type="submit">Filter</button>
</form>
<h1>League Table {{ selected_season.competition.name }} {{ selected_season.name }}</h1>
<table>
  <thead>
    <tr>
      <th>#</th>
      <th>Team</th>
      <th>P</th>
      <th>W</th>
      <th>D</th>
      <th>L</th>
      <th>GF</th>
      <th>GA</th>
      <th>GD</th>
      <th>Pts</th>
    </tr>
  </thead>
  <tbody>
    {% for row in table %}
    <tr class="
      {% if row.rank <= champions_league_cutoff %}
        ucl
      {% elif row.rank <= europa_league_cutoff %}
        europa
      {% elif row.rank <= conference_league_cutoff %}
        conference-league
      {% elif row.rank > relegation_cutoff %}
        relegation
      {% endif %}
    ">
      <td>{{ row.rank }}</td>
      <td class="team">{{ row.team }}</td>
      <td>{{ row.played }}</td>
      <td>{{ row.win }}</td>
      <td>{{ row.draw }}</td>
      <td>{{ row.loss }}</td>
      <td>{{ row.gf }}</td>
      <td>{{ row.ga }}</td>
      <td>{{ row.gd }}</td>
      <td><strong>{{ row.points }}</strong></td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<div class="legend">
  <span><span class="dot blue"></span> UEFA Champions League</span>
  <span><span class="dot orange"></span> Europa League</span>
  <span><span class="dot green"></span> Europa Conference League</span>
  <span><span class="dot red"></span> Relegation</span>
</div>
{% endblock %}

{% block extra_js %}
{% endblock %}